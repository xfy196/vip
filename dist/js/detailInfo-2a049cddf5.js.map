{"version":3,"sources":["detailInfo.js"],"names":["$","Car","data","this","carDetailInfo","formEle","colorEel","sizeEle","numReduce","numAdd","numInput","ajax","type","url","then","test","code","imageInfo","productInfo","images","forEach","item","index","concat","infoCoding","brandName","longTitle","promotion_price","max_market_price","promotionDiscount","sizes","name","dataJson","JSON","stringify","id","html","renderProductDetail","product","magnifier","container","containerImg","view","thumbnail","width","height","zoom","init","extend","prototype","initCars","bindEvent","addCar","productId","carsList","localStorage","setItem","parse","getItem","that","on","hasClass","hide","color","parent","siblings","val","size","num","setTimeout","location","href","show","toggleClass","find","removeClass","attr","Number","css","cursor","jQuery"],"mappings":"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","file":"detailInfo-2a049cddf5.js","sourcesContent":["\"use strict\";\n\n;\n;\n\n(function ($) {\n  getProductData().then(function (data) {\n    var magnifierConfig = {\n      magnifier: \".pic\",\n      //最外层的大容器\n      container: \".zoomPad\",\n      containerImg: \".zoom_origin_img_box\",\n      view: \".zoomWindow\",\n      thumbnail: \".pic-slider ul\",\n      width: 420,\n      //承载容器宽\n      height: 420,\n      //承载容器高\n      zoom: 3\n    };\n\n    if (!/^2\\d{2}$/.test(data.code)) {\n      return false;\n    }\n\n    renderProductDetail(data.data.product);\n    magnifier(magnifierConfig);\n    new Car({\n      data: data.data,\n      formEle: \"#cartAdd-form\",\n      colorEel: \".colorItem\",\n      sizeEle: \".size-list-item\",\n      numReduce: \".num-reduce\",\n      numInput: \".num-input\",\n      numAdd: \".num-add\"\n    }).init();\n  });\n  /**\r\n   * 购物车对象\r\n   */\n\n  function Car(data) {\n    this.data = data;\n    this.carDetailInfo = data.data;\n    this.formEle = $(data.formEle);\n    this.colorEel = $(data.colorEel);\n    this.sizeEle = $(data.sizeEle);\n    this.numReduce = $(data.numReduce);\n    this.numAdd = $(data.numAdd);\n    this.numInput = $(data.numInput);\n  }\n\n  $.extend(Car.prototype, {\n    init: function init() {\n      this.initCars();\n      this.bindEvent();\n    },\n    addCar: function addCar() {\n      // 就这个数据进行操作更改他的数据结构\n      var productId = this.carDetailInfo.product.id;\n      this.carsList[productId] = this.carDetailInfo.product;\n      localStorage.setItem(\"cars\", JSON.stringify(this.carsList));\n    },\n\n    /**\r\n     * 初始化购物车数据\r\n     */\n    initCars: function initCars() {\n      this.carsList = JSON.parse(localStorage.getItem(\"cars\")) || {};\n    },\n    bindEvent: function bindEvent() {\n      var that = this;\n      this.formEle.on(\"click\", \".button-box button\", function () {\n        // 验证购物车中的一些必选是否选中\n\n        /* \r\n            选中将购物车数据添加到localStorage中\r\n            没有选中弹出提示信息高度用户需要勾选选项\r\n        */\n        // 验证时候该选的都已经选中了\n        if (!(that.colorEel.hasClass(\"color-selected\") && that.sizeEle.hasClass(\"size-selected\"))) {\n          $(\".addErrorMsg\").show();\n        } else {\n          // 错误信息隐藏\n          $(\".addErrorMsg\").hide();\n          that.carDetailInfo.product.color = that.colorEel.parent().siblings(\"input\").val();\n          that.carDetailInfo.product.size = that.sizeEle.siblings(\"input\").val();\n          that.carDetailInfo.product.num = that.numInput.html(); // 将购物车的数据存储到localStorage中\n\n          that.addCar(); // 延迟跳转\n\n          setTimeout(function () {\n            location.href = \"./cars.html\";\n          }, 300);\n        }\n      }); //选择颜色\n\n      this.formEle.on(\"click\", that.data.colorEel, function () {\n        $(this).toggleClass(\"color-selected\").parent().siblings().find(that.data.colorEel).removeClass(\"color-selected\");\n\n        if ($(this).hasClass(\"color-selected\")) {\n          $(this).parent().siblings(\"input\").val($(this).attr(\"title\"));\n        } else {\n          $(this).parent().siblings(\"input\").val(\"\");\n        }\n      }); // 选择尺寸\n\n      this.formEle.on(\"click\", that.data.sizeEle, function () {\n        $(this).toggleClass(\"size-selected\").siblings(that.data.sizeEle).removeClass(\"size-selected\");\n\n        if ($(this).hasClass(\"size-selected\")) {\n          $(this).siblings(\"input\").val($(this).attr(\"title\"));\n        } else {\n          $(this).siblings(\"input\").val(\"\");\n        }\n      }); // 选择数量 加法的\n\n      this.formEle.on(\"click\", that.data.numAdd, function () {\n        var num = Number(that.numInput.html());\n        num++;\n\n        if (num > 1) {\n          that.numReduce.css({\n            cursor: \"pointer\"\n          });\n        }\n\n        that.numInput.html(num);\n      }); // 选择数量减法的\n\n      this.formEle.on(\"click\", that.data.numReduce, function () {\n        var num = Number(that.numInput.html());\n        ;\n        num--;\n\n        if (num === 0) {\n          return false;\n        }\n\n        if (num <= 1) {\n          that.numReduce.css({\n            cursor: \"not-allowed\"\n          });\n        }\n\n        that.numInput.html(num);\n      });\n    }\n  });\n  /**\r\n  * 获取商品详情的数据\r\n  */\n\n  function getProductData() {\n    return $.ajax({\n      type: \"get\",\n      url: \"../json/detailInfo.json\"\n    });\n  }\n  /**\r\n   * @msg 渲染商品详情的数据\r\n   * @param {数据} data \r\n   */\n\n\n  function renderProductDetail(data) {\n    var imageInfo = \"\";\n    var productInfo = \"\";\n    imageInfo += \"<div class=\\\"pic-sliderwrap\\\">\\n        <div class=\\\"show-midpic active-pannel\\\">\\n            <a href=\\\"javascript:;\\\" class=\\\"bigImgZoom\\\">\\n                <div class=\\\"zoomPad\\\">\\n                    <div class=\\\"zoom_origin_img_box\\\">\\n                    </div>\\n\\n                    <!-- \\u653E\\u5927\\u7684\\u76D2\\u5B50 -->\\n                    <div class=\\\"zoomWindow\\\" style=\\\"display: none;\\\">\\n                        <div class=\\\"zoomWrapperImage\\\">\\n                            \\n                        </div>\\n                    </div>\\n                </div>\\n            </a>\\n            <em class=\\\"icon-a\\\"></em>\\n        </div>\\n    </div>\\n    <div class=\\\"pic-slider\\\">\\n        <ul class=\\\"sImg-wrap\\\">\";\n    data.images.forEach(function (item, index) {\n      imageInfo += \"\\n            <li class=\\\"pic-sImg-item\\\">\\n                <img width=\\\"64\\\" height=\\\"64\\\"\\n                    src=\\\"\".concat(item, \"\\\"\\n                    class=\\\"mer-smallImg\\\" alt=\\\"\\\">\\n            </li>\");\n    });\n    imageInfo += \"</ul>\\n        </div>\\n        <!-- \\u4EA7\\u54C1\\u56FE\\u7247end -->\\n        <div class=\\\"product-text\\\">\\n            <p class=\\\"other-infoCoding\\\">\\u5546\\u54C1\\u7F16\\u7801\\uFF1A\".concat(data.infoCoding, \"</p>\\n            <div class=\\\"onsell-collect\\\" id=\\\"add_fav_wrapper\\\">\\n                <div class=\\\"goods-fav-collect\\\" id=\\\"add_fav_button\\\">\\n                    <i></i>\\n                    <span class=\\\"collect-tips\\\">\\u6536\\u85CF\\u5546\\u54C1</span>\\n                </div>\\n                <div class=\\\"goods-fav-collected hidden\\\" id=\\\"remove_fav_button\\\">\\n                    <i class=\\\"iconfont\\\"></i>\\n                    <span class=\\\"collect-tips had-collected\\\">\\u5DF2\\u6536\\u85CF</span>\\n                    <span class=\\\"collect-tips cancel-collected\\\">\\u53D6\\u6D88\\u6536\\u85CF</span>\\n                </div>\\n    \\n            </div>\\n        </div>\\n        <div class=\\\"safeguard-icon\\\">\\n        <div class=\\\"pi-promise-box clearfix\\\">\\n            <ul class=\\\"pi-promise-list\\\">\\n                <img src=\\\"//shop.vipstatic.com/img/detail/pc_xuanguan.png\\\">\\n            </ul>\\n        </div>\\n    </div>\"); // 商品详情的html\n\n    productInfo += \"\\n        <div class=\\\"pi-title-box\\\">\\n            <div class=\\\"pib-title\\\">\\n                <a href=\\\"javascript:;\\\" class=\\\"pib-title-brandName\\\">\".concat(data.brandName, \"</a>\\n                <span class=\\\"pib-presale-tag hidden\\\">\\u9884\\u552E</span>\\n                <p class=\\\"pib-title-detail\\\" title=\\\"\").concat(data.longTitle, \"\\\">\").concat(data.longTitle, \"\\n                </p>\\n            </div>\\n        </div>\\n        <div class=\\\"pi-price-box\\\">\\n            <div class=\\\"specialPrice-wrap\\\">\\n                <div class=\\\"spcecialPrice-box\\\">\\n                    <div class=\\\"sp-info\\\">\\n                        <span class=\\\"sp-title\\\">\\u6298\\u540E\\u4EF7</span>\\n                        <i class=\\\"pbox-yen\\\">\\xA5</i>\\n                        <span title=\\\"469\\\" class=\\\"sp-price\\\">\").concat(data.promotion_price, \"</span>\\n                        <span class=\\\"sp-postfix\\\"></span>\\n                        <span class=\\\"pbox-market\\\">\\xA5<del class=\\\"marketPrice\\\">\").concat(data.max_market_price, \"</del></span>\\n                        <span class=\\\"sp-discount\\\">\").concat(data.promotionDiscount, \"</span>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div id=\\\"proData-box\\\" class=\\\"pi-attr-box\\\">\\n            <form action=\\\"javascript:;\\\" class=\\\"cartAdd-form\\\" id=\\\"cartAdd-form\\\">\\n                <input type=\\\"hidden\\\" name=\\\"act\\\" value=\\\"add\\\">\\n                <input type=\\\"hidden\\\" name=\\\"client_time\\\" value=\\\"\\\">\\n                <dl class=\\\"delivery-address clearfix\\\">\\n                    <dt class=\\\"delivery-address-name\\\">\\u914D\\u9001</dt>\\n                    <dd class=\\\"delivery-address-box\\\">\\n                        <div class=\\\"delivery-address-info\\\">\\n                            <div class=\\\"delivery-address-tips\\\">\\n                                <span class=\\\"tab_name\\\">\\u8BF7\\u9009\\u62E9\\u914D\\u9001\\u533A\\u57DF</span>\\n                            </div>\\n                            <i class=\\\"iconfont icon-xiajiantou\\\"></i>\\n                        </div>\\n                    </dd>\\n                </dl>\\n                <div class=\\\"delivery_time_container delivery_message clearfix\\\">\\n                    <div class=\\\"message-box\\\">\\n\\n                        \\u73B0\\u5728\\u4ED8\\u6B3E\\uFF0C\\u9884\\u8BA14\\u670820\\u65E5\\uFF08\\u5468\\u4E00\\uFF09\\u9001\\u8FBE</div>\\n                </div>\\n                <dl class=\\\"i-freight clearfix\\\">\\n                    <dt class=\\\"freight-name\\\">\\u8FD0\\u8D39</dt>\\n                    <span id=\\\"freight_tips\\\" class=\\\"freight_tips\\\">\\u65B0\\u4F1A\\u5458\\u4E13\\u4EAB\\u9996\\u5355\\u6EE138\\u5143\\u514D\\u90AE\\uFF08\\u9650\\u552F\\u54C1\\u81EA\\u8425\\u5546\\u54C1\\uFF0C\\u90E8\\u5206\\u5546\\u54C1\\u4E0D\\u53EF\\u7528\\uFF09</span>\\n                </dl>\\n                <dl class=\\\"i-color clearfix\\\">\\n                    <dt class=\\\"color-name\\\">\\u989C\\u8272</dt>\\n                    <dd class=\\\"color-list\\\">\\n                        <ul class=\\\"clearfix\\\">\\n                        <input type=\\\"hidden\\\" name=\\\"color\\\" value=\\\"\\\">\\n                            <li class=\\\"color-list-item\\\"><a href=\\\"javascript:;\\\" title=\\\"\\u4F20\\u5947\\u84DD\\\"\\n                                    class=\\\"colorItem\\\">\\n                                    <span class=\\\"color-pic-wrapper\\\">\\n                                        <img src=\\\"https://a.vpimg3.com/upload/merchandise/pdcvis/2020/03/07/20/d2346eca-3693-4372-bc41-25813762fb83_420_531_54x69_100.jpg\\\"\\n                                            alt=\\\"\\u4F20\\u5947\\u84DD\\\" width=\\\"22\\\" height=\\\"28\\\">\\n                                    </span>\\n                                    <span class=\\\"color-item-name\\\">\\u4F20\\u5947\\u84DD</span>\\n                                    <span class=\\\"i-select\\\"></span>\\n                                    <span class=\\\"i-chance\\\"></span>\\n                                </a></li>\\n                            <li class=\\\"color-list-item\\\"><a href=\\\"javascript:;\\\" title=\\\"\\u6807\\u51C6\\u767D\\\"\\n                                    class=\\\"colorItem\\\">\\n                                    <span class=\\\"color-pic-wrapper\\\">\\n                                        <img src=\\\"https://a.vpimg3.com/upload/merchandise/pdcvis/2020/03/07/6/90b0f38c-4593-4d92-970a-6c71f2e0728d_420_531_54x69_100.jpg\\\"\\n                                            alt=\\\"\\u6807\\u51C6\\u767D\\\" width=\\\"22\\\" height=\\\"28\\\">\\n                                    </span>\\n                                    <span class=\\\"color-item-name\\\">\\u9676\\u74F7\\u767D</span>\\n                                    <span class=\\\"i-select\\\"></span>\\n                                    <span class=\\\"i-chance\\\"></span>\\n                                </a></li>\\n                        </ul>\\n                    </dd>\\n                </dl>\\n                <dl class=\\\"i-size clearfix\\\">\\n                    <dt class=\\\"size-name\\\">\\u5C3A\\u5BF8</dt>\\n                    <dd class=\\\"i-notice-msg notice-msg\\\"><i class=\\\"\\\"></i>\\u8BF7\\u9009\\u62E9\\u5C3A\\u7801</dd>\\n                    <dd class=\\\"size-list\\\">\\n                        <ul class=\\\"clearfix\\\">\\n                        <input type=\\\"hidden\\\" name=\\\"size\\\" value=\\\"\\\">\");\n    data.sizes.forEach(function (item, index) {\n      productInfo += \"<li class=\\\"size-list-item\\\" title=\\\"\".concat(item.name, \"\\\">\\n                            <span class=\\\"size-list-item-name\\\">\").concat(item.name, \"</span>\\n                            <span class=\\\"i-select\\\"></span>\\n                            <span class=\\\"i-recommand\\\"></span>\\n                        </li>\");\n    });\n    var dataJson = JSON.stringify(data);\n    productInfo += \"</ul>\\n                    </dd>\\n                </dl>\\n                <dl class=\\\"i-num clearfix\\\">\\n                    <dt class=\\\"num-name\\\">\\u6570\\u91CF</dt>\\n                    <dd class=\\\"ui-quantity num-box\\\">\\n                        <a href=\\\"javascript:;\\\" class=\\\"num-reduce iconfont icon-jianhao z-disable\\\"></a>\\n                        <em class=\\\"amount num-input num-txt\\\">1</em>\\n                        <a href=\\\"javascript:;\\\" class=\\\"num-add iconfont icon-jiahao\\\"></a>\\n                    </dd>\\n                </dl>\\n                <div class=\\\"addErrorMsg\\\">\\u8BF7\\u9009\\u62E9\\u6B63\\u786E\\u7684\\u989C\\u8272\\u548C\\u5C3A\\u5BF8\\u518D\\u53BB\\u63D0\\u4EA4</div>\\n                <div class=\\\"i-button\\\">\\n                    <!-- \\u52A0\\u5165\\u8D2D\\u7269\\u888B\\u7684\\u6309\\u94AE -->\\n                    <div class=\\\"button-box\\\">\\n                        <button type=\\\"submit\\\" class=\\\"ui-btn-large ui-btn-primary ui-btn-loading\\\" data-value=\".concat(dataJson, \" data-id=\").concat(data.id, \">\\n                            <span class=\\\"ui-btn-loading-before ui-btn-big\\\">\\n                                <i class=\\\"iconfont icon-gouwudai\\\"></i>\\n                                \\u52A0\\u5165\\u8D2D\\u7269\\u888B\\n                            </span>\\n                        </button>\\n                    </div>\\n                </div>\\n            </form>\\n        </div>\");\n    $(\".mer-ImgReview\").html(imageInfo);\n    $(\".product-content-inner\").html(productInfo);\n  }\n})(jQuery);"]}