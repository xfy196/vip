{"version":3,"sources":["header.js"],"names":["$","callbacks","Callbacks","add","ajax","url","dataType","data","count","uid","_","Date","now","success","hot_list_html","search_recommend_list_html","code","res","i","length","concat","key","_i","word","html","jsonpCallback","hover_two_get_staring","mouseover","setTimeout","then","msg","tabs","tabs_html","categoryId","name","mouseenter","args","category_id","this","firstElementChild","getAttribute","sub_category_html","brand_rec","sectionList","img_list","list_html","children","category","j","href","image","renderThreeCategory","navHoverAjax","click","show","blur","hide","window","scrollTop","userInfo","cookie","undefined","user","JSON","parse","username","addClass","next","removeClass","find","checkLogin","on","removeCookie","location","reload","fire","jQuery"],"mappings":"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","file":"header-6f6de7ac8d.js","sourcesContent":["\"use strict\";\n\n;\n;\n\n(function ($) {\n  var callbacks = $.Callbacks();\n  callbacks.add(init);\n  callbacks.fire();\n  /**\r\n   * 初始化的函数\r\n   */\n\n  function init() {\n    // getSearchKeywords();\n    getSearchKeyHotKeywords(); // 二级菜单鼠标划入发送的ajax的函数\n\n    navHoverAjax();\n    clickSearch();\n    locationTop();\n    checkLogin();\n    logout();\n  }\n  /**\r\n  * nav二级菜单hover发送ajax的函数\r\n  */\n\n\n  function navHoverAjax() {\n    var hover_two_get_staring = false; // 鼠标hover上去的时候采取发送请求\n\n    $(\".nav-list\").mouseover(function () {\n      // 函数节流\n      if (!hover_two_get_staring) {\n        setTimeout(function () {\n          getTwoCategory().then(function (data) {\n            // 返回的信息未success代表成功\n            if (data.msg === \"success\") {\n              hover_two_get_staring = true;\n              var tabs = data.data.data.tabs;\n              var tabs_html = \"\";\n\n              for (var i = 0; i < tabs.length; i++) {\n                tabs_html += \"<li class=\\\"t-w-m-item\\\"><span data-categoryId=\\\"\".concat(tabs[i].categoryId, \"\\\">\").concat(tabs[i].name, \"</span>\\n                                <div class=\\\"t-w-box\\\">\\n\\n                                </div>\\n                                </li>\");\n              } // 拼接数据\n\n\n              $(\".t-w-menu\").html(tabs_html);\n              threeCategoryAjax();\n            }\n          });\n        }, 100);\n      }\n    });\n  } // 点击top直接返回页面最上面\n\n\n  function locationTop() {\n    $(\".location-top,.top_txt\").click(function () {\n      $(window).scrollTop(0);\n    });\n  }\n  /**\r\n  * 点击出现搜索历史框和推荐商品\r\n  */\n\n\n  function clickSearch() {\n    $(\".search-ipt\").click(function () {\n      $(\".search-helper\").show();\n    });\n    $(\".search-ipt\").blur(function () {\n      $(\".search-helper\").hide();\n    });\n  } // 获取搜索关键字\n\n\n  function getSearchKeywords() {\n    $.ajax({\n      url: \"https://mapi.vip.com/vips-mobile/rest/shopping/search/entryword/pc/v1\",\n      dataType: \"jsonp\",\n      data: {\n        app_name: \"shop_pc\",\n        app_version: 4.0,\n        warehouse: \"VIP_SH\",\n        fdc_area_id: \"103104110\",\n        client: \"pc\",\n        mobile_platform: 1,\n        province_id: 103104,\n        api_key: \"70f71280d5d547b2a7bb370a529aeea1\",\n        user_id: \"\",\n        mars_cid: \"1585923048293_a96d442f0be377ab63fc1790f5d32873\",\n        wap_consumer: \"a\",\n        channel_id: 1,\n        gPlatform: \"PC\",\n        _: Date.now()\n      },\n      success: function success(data) {\n        // 数据请求成功之后需要将数据渲染到页面之中\n        if (data.msg === \"success\") {\n          $(\".search-ipt\").attr(\"placeholder\", data.data.showWord);\n        }\n      },\n      jsonpCallback: \"getSearchwords\"\n    });\n  } // 获取搜索热点关键字\n\n\n  function getSearchKeyHotKeywords() {\n    $.ajax({\n      url: \"https://category.vip.com/ajax/getSuggestHotKeywords.php\",\n      dataType: \"jsonp\",\n      data: {\n        count: 10,\n        uid: \"\",\n        _: Date.now()\n      },\n      success: function success(data) {\n        // code为200代表返回的是成功状态\n        var hot_list_html = \"\";\n        var search_recommend_list_html = \"\";\n\n        if (data.code === 200) {\n          var res = data.data;\n\n          for (var i = 0; i < res.length; i++) {\n            search_recommend_list_html += \"<li><a href=\\\"\".concat(res[i].url, \"\\\">\").concat(res[i].key, \"</a></li>\");\n          }\n\n          for (var _i = 0; _i < res.length; _i++) {\n            if (_i === 3) {\n              hot_list_html += \"<li><a href=\\\"\".concat(res[_i].url, \"\\\">\").concat(res[_i].word, \"</a></li>\");\n              break;\n            }\n\n            hot_list_html += \"<li><a href=\\\"\".concat(res[_i].url, \"\\\">\").concat(res[_i].word, \"</a><span>|</span></li>\");\n          } // 替换到页面之中\n\n\n          $(\".search-hots-pot .hot-list\").html(hot_list_html);\n          $(\".search-recommend-list ul\").html(search_recommend_list_html);\n        }\n      },\n      jsonpCallback: \"searchSuggestHotKeywords\"\n    });\n  } // 二级菜单的数据\n\n\n  function getTwoCategory() {\n    return $.ajax({\n      url: \"../json/TopCategory.json\",\n      dataType: \"json\"\n      /*        data: {\r\n                 app_name: \"shop_pc\",\r\n                 app_version: 4.0,\r\n                 warehouse: \"VIP_SH\",\r\n                 fdc_area_id: \"103104110\",\r\n                 client: \"PC\",\r\n                 mobile_platform: 1,\r\n                 province_id: 103104,\r\n                 api_key: \"70f71280d5d547b2a7bb370a529aeea1\",\r\n                 user_id: \"\",\r\n                 mars_cid: \"1585923048293_a96d442f0be377ab63fc1790f5d32873\",\r\n                 wap_consumer: \"a\",\r\n                 hierarchy_id: 117,\r\n                 _: Date.now()\r\n             }, */\n\n    });\n  } // 三级菜单数据请求\n\n\n  function getThreeCategory(args) {\n    return $.ajax({\n      url: \"../json/SubCategory\" + args.categoryId + \".json\",\n      dataType: \"json\"\n      /*             data: {\r\n                      app_name: \"shop_pc\",\r\n                      app_version: 4.0,\r\n                      warehouse: \"VIP_SH\",\r\n                      fdc_area_id: \"103104110\",\r\n                      client: \"PC\",\r\n                      mobile_platform: 1,\r\n                      province_id: \"103104\",\r\n                      api_key: \"70f71280d5d547b2a7bb370a529aeea1\",\r\n                      user_id: \"\",\r\n                      mars_cid: \"1585923048293_a96d442f0be377ab63fc1790f5d32873\",\r\n                      wap_consumer: \"a\",\r\n                      hierarchyId: 117,\r\n                      categoryId: args.categoryId,\r\n                      clientFrom: \"PC\",\r\n                      net: \"wifi\",\r\n                      width: 1920,\r\n                      height: 1080,\r\n                      pcmpWidth: 750,\r\n                      mobile_channel: \"nature\",\r\n                      functions: \"jumper\",\r\n                      _: Date.now()\r\n                  }, */\n\n    });\n  } // 三级菜单的请求发送\n\n\n  function threeCategoryAjax() {\n    $(\".t-w-m-item\").mouseenter(function () {\n      // 难道每一个二级菜单的category的ID值\n      var category_id = this.firstElementChild.getAttribute(\"data-categoryId\");\n      getThreeCategory({\n        categoryId: category_id\n      }).then(function (data) {\n        renderThreeCategory(data);\n      });\n    });\n  } // 三级菜单数据渲染操作\n\n\n  function renderThreeCategory(data) {\n    // 三级菜单变量\n    var sub_category_html = \"\"; // 三级菜单热门品牌图片变量\n\n    var brand_rec = \"\";\n    var res = data.data.data.sectionList; // 图片列表的变量\n\n    var img_list = \"\";\n\n    for (var i = 1; i < res.length; i++) {\n      var list_html = \"\";\n      var children = res[i].category.children;\n\n      for (var j = 0; j < children.length; j++) {\n        // 因为接口数据最后一项是热销商品的图片数据\n        if (i === res.length - 1) {\n          img_list += \" <li class=\\\"b-img\\\"><a href=\\\"\".concat(children[j].href, \"\\\"><img\\n                                    src=\\\"\").concat(children[j].image, \"\\\"></a></li>\");\n          continue;\n        }\n\n        list_html += \"<li class=\\\"category_item\\\"><a href=\\\"\".concat(children[j].href, \"\\\">\").concat(children[j].name, \"</a></li>\");\n      }\n\n      if (i === res.length - 1) {\n        continue;\n      } // 三级菜单循环渲染\n\n\n      sub_category_html += \"<div class=\\\"sub clearfix\\\">\\n                            <strong>\".concat(res[i].category.name, \"</strong>\\n                            <i class=\\\"iconfont icon-zuojiantou-copy\\\"></i>\\n                            <ul class=\\\"category_list\\\">\\n                            \").concat(list_html, \"\\n                            </ul>\\n                            </div>\");\n    } // 最后处理三级菜单的html代码\n\n\n    sub_category_html = \"<div class=\\\"brand-type clearfix\\\">\\n                            \".concat(sub_category_html, \"\\n                        </div>\"); // 每一个品牌热销的图片html代码\n\n    brand_rec += \" <div class=\\\"brand-img\\\"><div class=\\\"brand-title\\\">\\n                        \\u54C1\\u724C\\u63A8\\u8350\\n                        </div>\\n                        <ul class=\\\"brands\\\">\\n                            \".concat(img_list, \"\\n                        </ul></div>\"); // 渲染到页面之中\n\n    $(\".t-w-box\").html(sub_category_html + brand_rec);\n  }\n  /**\r\n   * 检查是否登录\r\n   */\n\n\n  function checkLogin() {\n    var userInfo = $.cookie(\"userLoginInfo\"); // 等于undefined直接结束\n\n    if (userInfo === undefined) {\n      return false;\n    } // 不然我们需要将用户信息放在页面之中 表示已登录\n\n\n    var user = JSON.parse(userInfo);\n    $(\".sign-text\").html(user.username);\n    $(\".top-pic-infs\").addClass(\"hidden\").next().removeClass(\"hidden\").find(\".success_username\").html(user.username);\n    $(\"#my_cnt_no_name\").addClass(\"hidden\").next().removeClass(\"hidden\").find(\"#my_cnt_user_name\").html(user.username);\n  }\n  /**\r\n   * 退出\r\n   */\n\n\n  function logout() {\n    $(\".top-pic-success\").on(\"click\", \".logout\", function () {\n      $.removeCookie(\"userLoginInfo\");\n      location.reload();\n    });\n  }\n})(jQuery);"]}