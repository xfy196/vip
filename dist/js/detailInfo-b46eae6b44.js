"use strict";!function(e){var n=e.Callbacks();function i(n){this.data=n,this.carDetailInfo=n.data,this.formEle=e(n.formEle),this.colorEel=e(n.colorEel),this.sizeEle=e(n.sizeEle),this.numReduce=e(n.numReduce),this.numAdd=e(n.numAdd),this.numInput=e(n.numInput)}n.add(function(){e.ajax({type:"get",url:"../json/detailInfo.json"}).then(function(n){if(!/^2\d{2}$/.test(n.code))return!1;!function(n){var s="",a="";s+='<div class="pic-sliderwrap">\n        <div class="show-midpic active-pannel">\n            <a href="javascript:;" class="bigImgZoom">\n                <div class="zoomPad">\n                    <div class="zoom_origin_img_box">\n                    </div>\n\n                    \x3c!-- 放大的盒子 --\x3e\n                    <div class="zoomWindow" style="display: none;">\n                        <div class="zoomWrapperImage">\n                            \n                        </div>\n                    </div>\n                </div>\n            </a>\n            <em class="icon-a"></em>\n        </div>\n    </div>\n    <div class="pic-slider">\n        <ul class="sImg-wrap">',n.images.forEach(function(n,i){s+='\n            <li class="pic-sImg-item">\n                <img width="64" height="64"\n                    src="'.concat(n,'"\n                    class="mer-smallImg" alt="">\n            </li>')}),s+='</ul>\n        </div>\n        \x3c!-- 产品图片end --\x3e\n        <div class="product-text">\n            <p class="other-infoCoding">商品编码：'.concat(n.infoCoding,'</p>\n            <div class="onsell-collect" id="add_fav_wrapper">\n                <div class="goods-fav-collect" id="add_fav_button">\n                    <i></i>\n                    <span class="collect-tips">收藏商品</span>\n                </div>\n                <div class="goods-fav-collected hidden" id="remove_fav_button">\n                    <i class="iconfont"></i>\n                    <span class="collect-tips had-collected">已收藏</span>\n                    <span class="collect-tips cancel-collected">取消收藏</span>\n                </div>\n    \n            </div>\n        </div>\n        <div class="safeguard-icon">\n        <div class="pi-promise-box clearfix">\n            <ul class="pi-promise-list">\n                <img src="//shop.vipstatic.com/img/detail/pc_xuanguan.png">\n            </ul>\n        </div>\n    </div>'),a+='\n        <div class="pi-title-box">\n            <div class="pib-title">\n                <a href="javascript:;" class="pib-title-brandName">'.concat(n.brandName,'</a>\n                <span class="pib-presale-tag hidden">预售</span>\n                <p class="pib-title-detail" title="').concat(n.longTitle,'">').concat(n.longTitle,'\n                </p>\n            </div>\n        </div>\n        <div class="pi-price-box">\n            <div class="specialPrice-wrap">\n                <div class="spcecialPrice-box">\n                    <div class="sp-info">\n                        <span class="sp-title">折后价</span>\n                        <i class="pbox-yen">¥</i>\n                        <span title="469" class="sp-price">').concat(n.promotion_price,'</span>\n                        <span class="sp-postfix"></span>\n                        <span class="pbox-market">¥<del class="marketPrice">').concat(n.max_market_price,'</del></span>\n                        <span class="sp-discount">').concat(n.promotionDiscount,'</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id="proData-box" class="pi-attr-box">\n            <form action="javascript:;" class="cartAdd-form" id="cartAdd-form">\n                <input type="hidden" name="act" value="add">\n                <input type="hidden" name="client_time" value="">\n                <dl class="delivery-address clearfix">\n                    <dt class="delivery-address-name">配送</dt>\n                    <dd class="delivery-address-box">\n                        <div class="delivery-address-info">\n                            <div class="delivery-address-tips">\n                                <span class="tab_name">请选择配送区域</span>\n                            </div>\n                            <i class="iconfont icon-xiajiantou"></i>\n                        </div>\n                    </dd>\n                </dl>\n                <div class="delivery_time_container delivery_message clearfix">\n                    <div class="message-box">\n\n                        现在付款，预计4月20日（周一）送达</div>\n                </div>\n                <dl class="i-freight clearfix">\n                    <dt class="freight-name">运费</dt>\n                    <span id="freight_tips" class="freight_tips">新会员专享首单满38元免邮（限唯品自营商品，部分商品不可用）</span>\n                </dl>\n                <dl class="i-color clearfix">\n                    <dt class="color-name">颜色</dt>\n                    <dd class="color-list">\n                        <ul class="clearfix">\n                        <input type="hidden" name="color" value="">\n                            <li class="color-list-item"><a href="javascript:;" title="传奇蓝"\n                                    class="colorItem">\n                                    <span class="color-pic-wrapper">\n                                        <img src="https://a.vpimg3.com/upload/merchandise/pdcvis/2020/03/07/20/d2346eca-3693-4372-bc41-25813762fb83_420_531_54x69_100.jpg"\n                                            alt="传奇蓝" width="22" height="28">\n                                    </span>\n                                    <span class="color-item-name">传奇蓝</span>\n                                    <span class="i-select"></span>\n                                    <span class="i-chance"></span>\n                                </a></li>\n                            <li class="color-list-item"><a href="javascript:;" title="标准白"\n                                    class="colorItem">\n                                    <span class="color-pic-wrapper">\n                                        <img src="https://a.vpimg3.com/upload/merchandise/pdcvis/2020/03/07/6/90b0f38c-4593-4d92-970a-6c71f2e0728d_420_531_54x69_100.jpg"\n                                            alt="标准白" width="22" height="28">\n                                    </span>\n                                    <span class="color-item-name">陶瓷白</span>\n                                    <span class="i-select"></span>\n                                    <span class="i-chance"></span>\n                                </a></li>\n                        </ul>\n                    </dd>\n                </dl>\n                <dl class="i-size clearfix">\n                    <dt class="size-name">尺寸</dt>\n                    <dd class="i-notice-msg notice-msg"><i class=""></i>请选择尺码</dd>\n                    <dd class="size-list">\n                        <ul class="clearfix">\n                        <input type="hidden" name="size" value="">'),n.sizes.forEach(function(n,i){a+='<li class="size-list-item" title="'.concat(n.name,'">\n                            <span class="size-list-item-name">').concat(n.name,'</span>\n                            <span class="i-select"></span>\n                            <span class="i-recommand"></span>\n                        </li>')});var i=JSON.stringify(n);a+='</ul>\n                    </dd>\n                </dl>\n                <dl class="i-num clearfix">\n                    <dt class="num-name">数量</dt>\n                    <dd class="ui-quantity num-box">\n                        <a href="javascript:;" class="num-reduce iconfont icon-jianhao z-disable"></a>\n                        <em class="amount num-input num-txt">1</em>\n                        <a href="javascript:;" class="num-add iconfont icon-jiahao"></a>\n                    </dd>\n                </dl>\n                <div class="addErrorMsg">请选择正确的颜色和尺寸再去提交</div>\n                <div class="i-button">\n                    \x3c!-- 加入购物袋的按钮 --\x3e\n                    <div class="button-box">\n                        <button type="submit" class="ui-btn-large ui-btn-primary ui-btn-loading" data-value='.concat(i," data-id=").concat(n.id,'>\n                            <span class="ui-btn-loading-before ui-btn-big">\n                                <i class="iconfont icon-gouwudai"></i>\n                                加入购物袋\n                            </span>\n                        </button>\n                    </div>\n                </div>\n            </form>\n        </div>'),e(".mer-ImgReview").html(s),e(".product-content-inner").html(a)}(n.data.product),magnifier({magnifier:".pic",container:".zoomPad",containerImg:".zoom_origin_img_box",view:".zoomWindow",thumbnail:".pic-slider ul",width:420,height:420,zoom:3}),new i({data:n.data,formEle:"#cartAdd-form",colorEel:".colorItem",sizeEle:".size-list-item",numReduce:".num-reduce",numInput:".num-input",numAdd:".num-add"}).init()}),e.ajax({url:"../json/detailRecommend.json",dataType:"json"}).then(function(n){var i,s,a,t;i=n.data.brandStoreV2,s="",i.products.forEach(function(n,i){s+='<a href="javascript:void(0)" data-id='.concat(n.productId,'>\n                 <img src="').concat(n.imageUrl,'"\n                     alt="">\n                 <div class="re-product-info">\n                     <div class="re-product-name">').concat(n.title,'</div>\n                     <div class="re-product-price">¥').concat(n.salePrice.salePrice,"</div>\n                 </div>\n             </a>")}),e(".re-brand").html(s),a=n.data.lookLook,t="",a.products.forEach(function(n,i){t+='<a href="javascript:void(0)" data-id='.concat(n.productId,'>\n                 <img src="').concat(n.imageUrl,'"\n                     alt="">\n                 <div class="re-product-info">\n                     <div class="re-product-name">').concat(n.title,'</div>\n                     <div class="re-product-price">¥').concat(n.salePrice.salePrice,"</div>\n                 </div>\n             </a>")}),e(".re-look").html(t)}),e(".recommend").on("click",".re-pre",function(){var n=e(this).parent().prev().find(".re-list");if(e(this).hasClass("icon-btn-disable"))return!1;n.stop(!0,!0).animate({top:n.position().top+1e3},200,function(){e(this).siblings().removeClass("icon-btn-disable"),0===n.position().top&&e(this).addClass("icon-btn-disable").siblings().removeClass("icon-btn-disable")}.bind(this))}),e(".recommend").on("click",".re-next",function(){if(e(this).hasClass("icon-btn-disable"))return!1;var n=e(this).parent().prev().find(".re-list"),i=n.children(),s=i.height()*i.length;n.stop(!0,!0).animate({top:n.position().top-1e3},200,function(){e(this).siblings().removeClass("icon-btn-disable"),n.position().top===-(s-1e3)&&e(this).addClass("icon-btn-disable")}.bind(this))})}),n.fire(),e.extend(i.prototype,{init:function(){this.initCars(),this.bindEvent()},addCar:function(){var n=this.carDetailInfo.product.id;this.carsList[n]=this.carDetailInfo.product,localStorage.setItem("cars",JSON.stringify(this.carsList))},initCars:function(){this.carsList=JSON.parse(localStorage.getItem("cars"))||{};var n=Object.keys(this.carsList);if(0!==n.length&&-1!==n.indexOf(this.carDetailInfo.product.id)){var i=this.carsList[this.carDetailInfo.product.id],s=e(".productInfo").find("a[title="+i.color+"]").addClass("color-selected").parent().siblings("input").val(i.color).end().end().end().find("li[title="+i.size+"]").addClass("size-selected").siblings("input").val(i.size).end().end().find(".num-input").html(i.num);1<i.num&&s.prev().css({cursor:"pointer"})}},bindEvent:function(){var i=this;this.formEle.on("click",".button-box button",function(){i.colorEel.hasClass("color-selected")&&i.sizeEle.hasClass("size-selected")?(e(".addErrorMsg").hide(),i.carDetailInfo.product.color=i.colorEel.parent().siblings("input").val(),i.carDetailInfo.product.size=i.sizeEle.siblings("input").val(),i.carDetailInfo.product.num=i.numInput.html(),i.addCar(),setTimeout(function(){location.href="./cars.html"},300)):e(".addErrorMsg").show()}),this.formEle.on("click",i.data.colorEel,function(){e(this).toggleClass("color-selected").parent().siblings().find(i.data.colorEel).removeClass("color-selected"),e(this).hasClass("color-selected")?e(this).parent().siblings("input").val(e(this).attr("title")):e(this).parent().siblings("input").val("")}),this.formEle.on("click",i.data.sizeEle,function(){e(this).toggleClass("size-selected").siblings(i.data.sizeEle).removeClass("size-selected"),e(this).hasClass("size-selected")?e(this).siblings("input").val(e(this).attr("title")):e(this).siblings("input").val("")}),this.formEle.on("click",i.data.numAdd,function(){var n=Number(i.numInput.html());1<++n&&i.numReduce.css({cursor:"pointer"}),i.numInput.html(n)}),this.formEle.on("click",i.data.numReduce,function(){var n=Number(i.numInput.html());if(0==--n)return!1;n<=1&&i.numReduce.css({cursor:"not-allowed"}),i.numInput.html(n)})}})}(jQuery);
//# sourceMappingURL=detailInfo-b46eae6b44.js.map
