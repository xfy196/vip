{"version":3,"sources":["login.js"],"names":["$","callbacks","Callbacks","add","on","this","addClass","siblings","removeClass","index","eq","validator","addMethod","value","element","optional","test","validate","rules","username","required","format","password","messages","errorPlacement","error","errorText","innerHTML","css","borderColor","show","parent","children","html","unhighlight","hide","click","valid","ajax","url","method","dataType","data","val","success","console","log","type","cookie","JSON","stringify","userInfo","expires","setTimeout","location","href","fire","jQuery"],"mappings":"AAAA,cAKA,SAAWA,GACT,IAAIC,EAAYD,EAAEE,YAClBD,EAAUE,IAMV,WAWEH,EAAE,iBAAiBI,GAAG,QAAS,WAC7BJ,EAAEK,MAAMC,SAAS,UAAUC,WAAWC,YAAY,UAElD,IAAIC,EAAQT,EAAE,iBAAiBS,MAAMT,EAAEK,OACvCL,EAAE,kBAAkBM,SAAS,UAAUI,GAAGD,GAAOD,YAAY,YA0F/DR,EAAEW,UAAUC,UAAU,SAAU,SAAUC,EAAOC,GAG/C,OAAOT,KAAKU,SAASD,IAFL,2EAE2BE,KAAKH,IADjC,gDACoDG,KAAKH,IACvE,WA9CHb,EAAE,SAASiB,SAAS,CAClBC,MAAO,CACLC,SAAU,CACRC,UAAU,EACVC,QAAQ,GAEVC,SAAU,CACRF,UAAU,IAGdG,SAAU,CACRJ,SAAU,CACRC,SAAU,WAEZE,SAAU,CACRF,SAAU,WAGdI,eAAgB,SAAwBC,EAAOX,GAC7C,IAAIY,EAAYD,EAAM,GAAGE,UACzBb,EAAQc,IAAI,CACVC,YAAa,YAEff,EAAQP,SAAS,eAAeuB,OAChChB,EAAQiB,SAASxB,SAAS,cAAcuB,OAAOE,SAAS,QAAQC,KAAKP,IAEvEQ,YAAa,SAAqBpB,GAChCd,EAAEc,GAASc,IAAI,CACbC,YAAa,SAEf7B,EAAEc,GAASP,SAAS,eAAe4B,OACnCnC,EAAEc,GAASiB,SAASxB,SAAS,cAAc4B,UAzE/CnC,EAAE,eAAeoC,MAAM,WAIrB,IAHgBpC,EAAE,SAASqC,QAIzB,OAAO,EAITrC,EAAEsC,KAAK,CAELC,IAAK,0CACLC,OAAQ,OACRC,SAAU,OACVC,KAAM,CACJvB,SAAUnB,EAAE,aAAa2C,MACzBrB,SAAUtB,EAAE,aAAa2C,OAE3BC,QAAS,SAAiBF,GACxBG,QAAQC,IAAIJ,GAEM,YAAdA,EAAKK,OAEP/C,EAAEgD,OAAO,gBAAiBC,KAAKC,UAAUR,EAAKS,UAAW,CACvDC,QAAS,IAGXC,WAAW,WACTC,SAASC,KAAO,KACf,aAvDbtD,EAAUuD,OAHZ,CAuHGC","file":"login-3b7398202e.js","sourcesContent":["\"use strict\";\n\n;\n;\n\n(function ($) {\n  var callbacks = $.Callbacks();\n  callbacks.add(init);\n  callbacks.fire();\n  /**\n   * 初始化的函数\n   */\n\n  function init() {\n    qr_account_hover_switch();\n    validate();\n  }\n  /**\n   * 二维码等录和账号登录切换\n   */\n\n\n  function qr_account_hover_switch() {\n    // 事件绑定\n    $(\".tab-nav-item\").on(\"click\", function () {\n      $(this).addClass(\"active\").siblings().removeClass(\"active\"); // 获取active状态的下标\n\n      var index = $(\".tab-nav-item\").index($(this));\n      $(\".login_content\").addClass(\"l-hide\").eq(index).removeClass(\"l-hide\");\n    });\n  }\n\n  function bindEventValidate() {\n    // 表单提交的时候也需要验证一次\n    $(\"#submit-btn\").click(function () {\n      var isChecked = $(\"#form\").valid();\n      ;\n\n      if (!isChecked) {\n        return false;\n      } // 如果验证成功我们就发送ajax请求\n\n\n      $.ajax({\n        // url: \"http://xfy196.qicp.vip/api/login\",\n        url: \"http://xfy196.qicp.vip/vipPhp/login.php\",\n        method: \"POST\",\n        dataType: \"json\",\n        data: {\n          username: $(\"#username\").val(),\n          password: $(\"#password\").val()\n        },\n        success: function success(data) {\n          console.log(data);\n\n          if (data.type === \"success\") {\n            // 成功\n            $.cookie('userLoginInfo', JSON.stringify(data.userInfo), {\n              expires: 7\n            }); // 设置完cookie跳转首页面\n\n            setTimeout(function () {\n              location.href = \"/\";\n            }, 1000);\n          }\n        }\n      });\n    });\n  }\n  /**\n   * 表单验证\n   */\n\n\n  function validate() {\n    customValidate();\n    $(\"#form\").validate({\n      rules: {\n        username: {\n          required: true,\n          format: true\n        },\n        password: {\n          required: true\n        }\n      },\n      messages: {\n        username: {\n          required: \"用户名不能为空\"\n        },\n        password: {\n          required: \"密码不能为空\"\n        }\n      },\n      errorPlacement: function errorPlacement(error, element) {\n        var errorText = error[0].innerHTML;\n        element.css({\n          borderColor: \"#f64a4a\"\n        });\n        element.siblings(\".icon-error\").show();\n        element.parent().siblings(\".error_msg\").show().children(\"span\").html(errorText);\n      },\n      unhighlight: function unhighlight(element, errorClass, validClass) {\n        $(element).css({\n          borderColor: \"#666\"\n        });\n        $(element).siblings(\".icon-error\").hide();\n        $(element).parent().siblings(\".error_msg\").hide();\n      }\n    });\n    bindEventValidate();\n  }\n  /**\n   * 自定义邮箱，手机号码的正则验证\n   */\n\n\n  function customValidate() {\n    $.validator.addMethod(\"format\", function (value, element) {\n      var regMobile = /^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|(147))\\d{8}$/;\n      var regEmail = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\n      return this.optional(element) || regMobile.test(value) || regEmail.test(value);\n    }, \"用户名格式错误\");\n  }\n})(jQuery);"]}