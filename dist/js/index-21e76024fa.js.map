{"version":3,"sources":["index.js"],"names":["swiperOpr","mySwiper","Swiper","effect","fadeEffect","crossFade","autoplay","delay","disableOnInteraction","loop","pagination","el","clickable","navigation","nextEl","prevEl","i","bullets","length","onmouseover","this","click","stop","prev_ele","next_ele","$","animate","left","right","onmouseout","start","Stairs","options","init","shop_top_banners","_loop","floorNum","ajax","type","url","data","mode","warehouse","areaCode","pagecode","provinceName","cityName","brandInfoExt[fields]","brandInfoExt[startIndex]","brandInfoExt[num]","preview","token","_","Date","now","dataType","then","callback","html","attr","marginStr","concat","brandImage","size2","salesName","activeIndexTips","agio","salesNo","noticeRankRenderData","brandInfo","setTimeout","content_selector","stairs_selector","lazyload","placeholder","threshold","floorId","newDapLogic","channelId","sortType","sell_time_from","time_from","shop_top_banner","code","msg","brandInfoData","count","float_str","size1","find","renderFloorData","floorChangeEvent","t","left_bar_top","offset","top","document","scroll","body_scrollTop","scrollTop","css","position","leftBarFollow","nav_ele","width","background","boxShadow","z-index","removeAttr","suctionTop","prototype","constructor","content_ele_offset_top_list","index","cords","push","bind","_length","min_top","max_top","last","height","bindEvent","$body_html","instance","_this","calcStairsIndex","changeStairsIndex","st","changeStairsBtn","_list","removeClass","eq","addClass","siblings","trigger"],"mappings":"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","file":"index-21e76024fa.js","sourcesContent":["\"use strict\";\n\n;\n;\n\n(function () {\n  $(function () {\n    init();\n  });\n  /**\r\n   * 页面初始化的函数\r\n   */\n\n  function init() {\n    // getBannerData();\n    swiperOpr(); // 梯子改变的事件\n\n    floorChangeEvent(); // 左边梯子随着滚轮滚动跟随的函数\n\n    leftBarFollow(); // 吸顶函数\n\n    suctionTop();\n  } // swiper的轮播图的函数\n\n\n  function swiperOpr() {\n    var mySwiper = new Swiper('.swiper-container', {\n      effect: 'fade',\n      fadeEffect: {\n        crossFade: true\n      },\n      autoplay: {\n        delay: 3000,\n        disableOnInteraction: true\n      },\n      loop: true,\n      // 循环模式选项\n      // 如果需要分页器\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: true\n      },\n      // 如果需要前进后退按钮\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev'\n      }\n    }); //鼠标滑过pagination控制swiper切换\n\n    for (var i = 0; i < mySwiper.pagination.bullets.length; i++) {\n      mySwiper.pagination.bullets[i].onmouseover = function () {\n        this.click();\n      };\n    }\n\n    mySwiper.el.onmouseover = function () {\n      mySwiper.autoplay.stop();\n      var prev_ele = mySwiper.navigation.prevEl;\n      var next_ele = mySwiper.navigation.nextEl;\n      $(prev_ele).stop(true).animate({\n        left: 0\n      });\n      $(next_ele).stop(true).animate({\n        right: 0\n      });\n    };\n\n    mySwiper.el.onmouseout = function () {\n      // 获取左右两边的按钮\n      var prev_ele = mySwiper.navigation.prevEl;\n      var next_ele = mySwiper.navigation.nextEl; // 给两个边的那妞设置动画隐藏效果\n\n      $(prev_ele).stop(true).animate({\n        left: -33\n      });\n      $(next_ele).stop(true).animate({\n        right: -33\n      });\n      mySwiper.autoplay.start();\n    };\n  } // 梯子切换\n\n\n  function floorChangeEvent() {\n    // 1.点击梯子时候 我们是需要找到与梯子对应盒子 对应盒子距离顶部的距离没然后直接将滚动条直接设置这个高度\n    // 2.当我滑动的时候， 当这个盒子刚出来的时候啊，我们需要发送一个请求去请求对应梯子的数据 然后吐过这个梯子的距离浏览器顶部的高度等于scrollTop的高度就将左侧的变为选中状态\n    // 加入一个图片懒加载功能\n    // 这个ajax不是我们页面一上来就去出发的 是通过这个梯子去触发的\n    var shop_top_banners = $(\".shop-top-banner\");\n\n    var _loop = function _loop(i) {\n      if (i === shop_top_banners.length - 1) {\n        // 最后一个梯子是预告的请求\n        noticeRankAjax().then(function (data) {\n          noticeRankRenderData(data.data.brandInfo, function () {\n            setTimeout(function () {\n              new Stairs({\n                content_selector: \".shop-top-banner\",\n                stairs_selector: \".left-ladder a\"\n              });\n              $(\".wrap img\").lazyload({\n                // 覆盖lazyload自带的背景图片\n                placeholder: \"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3544053956,2144358865&fm=26&gp=0.jpg\",\n                effect: \"fadeIn\",\n                threshold: 400\n              });\n            }, 300);\n          });\n        });\n      }\n\n      floorShopAjax(i + 1).then(function (data) {\n        renderFloorData(data, shop_top_banners[i]);\n      });\n    };\n\n    for (var i = 0; i < shop_top_banners.length; i++) {\n      _loop(i);\n    }\n  }\n\n  function renderFloorData(data, shop_top_banner, callback) {\n    // 判读状态码\n    if (data.code === 200 && data.msg === \"success\") {\n      var html = \"\";\n      var brandInfoData = data.data.brandInfo; // 因为需要偶数左浮动奇数右浮动\n\n      var count = 0;\n\n      for (var attr in brandInfoData) {\n        var float_str = \"left\";\n\n        if (count % 2) {\n          float_str = \"right\";\n        }\n\n        html += \"<a href=\\\"./shop_list.html\\\"><div class=\\\"shop-item\\\" style=\\\"float: \".concat(float_str, \"; margin-bottom: 20px;\\\"><img width=570 height=273\\n                data-original=\\\"\").concat(brandInfoData[attr].brandImage.size1, \"\\\" alt=\\\"\\\">\\n                <div class=\\\"brand-info\\\" style=\\\"margin-top: 20px; font-size: 18px;\\\">\\n                    <p class=\\\"brandName\\\" style=\\\"color: #000000; font-weight: bold; margin-bottom: 10px;\\\">\\n                        \").concat(brandInfoData[attr].salesName, \"</p>\\n                        <p style=\\\"color:#333333\\\">\").concat(brandInfoData[attr].agio, \"\\n                            \").concat(brandInfoData[attr].activeIndexTips, \"\\n                        </p>\\n                </div>\\n            </div></a>\");\n        count++;\n      } // 渲染到页面之中\n\n\n      $(shop_top_banner).find(\".shop-show-box\").html(html);\n\n      if (typeof callback === \"function\") {\n        callback();\n      }\n    }\n  } // 商品梯子图片展示的ajax请求\n\n\n  function floorShopAjax(floorNum) {\n    return $.ajax({\n      url: \"http://xfy196.qicp.vip/floor\",\n      dataType: \"json\",\n      data: {\n        floorId: floorNum,\n        newDapLogic: 1,\n        warehouse: \"VIP_SH\",\n        channelId: 0,\n        sortType: 1,\n        areaCode: 103104,\n        pagecode: \"a\",\n        provinceName: \"安徽省\",\n        cityName: \"滁州市\",\n        \"brandInfoExt[fields]\": \"activeIndexTips,displayEndtime,salesNo,brandImage,mobileImageOne,agio,salesName,brandStoreSn,vendorSaleMessage,isSpecialBanner,hiddenEndTime,iconInfo,link,brandType,pms_act_no,showTimeFrom\",\n        \"brandInfoExt[startIndex]\": 0,\n        \"brandInfoExt[num]\": 36,\n        preview: \"\",\n        token: \"\",\n        sell_time_from: \"\",\n        time_from: \"\",\n        _: Date.now()\n      }\n    });\n  } // 左边栏scroll监听跟随的操作\n\n\n  function leftBarFollow() {\n    var t = null;\n    var left_bar_top = $(\".left-ladder\").offset().top; // 滚动监听\n\n    $(document).scroll(function () {\n      if (typeof t === \"number\") {\n        return false;\n      }\n\n      t = setTimeout(function () {\n        t = null;\n        var body_scrollTop = $(\"body,html\").scrollTop();\n\n        if (left_bar_top <= body_scrollTop) {\n          $(\".left-ladder\").css({\n            position: \"fixed\",\n            top: \"10%\"\n          });\n        } else {\n          $(\".left-ladder\").css({\n            position: \"absolute\",\n            // 需要减去nav的高度应为nav菜单栏是固定定位了\n            top: 1565\n          });\n        }\n      }, 100);\n    });\n  } // 吸顶操作\n\n\n  function suctionTop() {\n    // 找到nav菜单的元素节点\n    var nav_ele = $(\".nav\"); // 获取这个元素距离页面的高度\n\n    var scrollTop = nav_ele.offset().top;\n    var t = null;\n    $(document).scroll(function () {\n      // 函数节流\n      if (typeof t === \" number\") {\n        return false;\n      }\n\n      t = setTimeout(function () {}, 200);\n\n      if (scrollTop <= $(\"body,html\").scrollTop()) {\n        nav_ele.css({\n          width: \"100%\",\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          background: \"#ffffff\",\n          boxShadow: \"0 1px 3px 0 #a7a7a7\",\n          \"z-index\": 100\n        });\n      } else {\n        nav_ele.removeAttr(\"style\");\n      }\n    });\n  }\n  /**\r\n   * 最后预告板块的数据请求渲染\r\n   */\n\n\n  function noticeRankAjax() {\n    // 发送ajax的请求\n    return $.ajax({\n      type: \"get\",\n      url: \"http://xfy196.qicp.vip/notice\",\n      data: {\n        mode: \"home\",\n        warehouse: \"VIP_SH\",\n        areaCode: \"103104\",\n        pagecode: \"a\",\n        provinceName: \"安徽省\",\n        cityName: \"滁州市\",\n        \"brandInfoExt[fields]\": \"activeIndexTips,salesNo,brandImage,mobileImageOne,salesName,brandStoreSn,vendorSaleMessage,warmMode,agio,storyLogo,link,brandType,pms_act_no,showTimeFrom\",\n        \"brandInfoExt[startIndex]\": 0,\n        \"brandInfoExt[num]\": \"72\",\n        preview: \"\",\n        token: \"\",\n        _: Date.now()\n      },\n      dataType: \"json\"\n    });\n  }\n\n  function noticeRankRenderData(data, callback) {\n    var html = \"\";\n    var i = 0;\n\n    for (var attr in data) {\n      var marginStr = \"margin:0 30px 20px 0\"; // 每一行的最后一位我们需要将margin设置为0\n\n      if ((i + 1) % 4 === 0) {\n        marginStr = \"margin : 0\";\n      }\n\n      html += \"<div style=\\\"\".concat(marginStr, \"\\\" class=\\\"brand-item\\\">\\n            <a href=\\\"javascript:void(0)\\\"><img class=\\\"brand-img\\\" data-original=\\\"\").concat(data[attr].brandImage.size2, \"\\\"></a>\\n            <div class=\\\"brand-info\\\">\\n                <a class=\\\"brand-name\\\" href=\\\"javascript:void(0)\\\">\").concat(data[attr].salesName, \"</a>\\n                <div class=\\\"pms-info\\\" title=\\\"\").concat(data[attr].activeIndexTips, \"\\\">\\n                    \").concat(data[attr].activeIndexTips, \"\\n                </div>\\n                <span class=\\\"brand-discount\\\">\").concat(data[attr].agio, \"\\n            </div>\\n            <form action=\\\"#\\\" class=\\\"book_form\\\">\\n                <div class=\\\"book-notice-warp\\\">\\n                    <input type=\\\"hidden\\\" value=\\\"\").concat(data[attr].salesNo, \"\\\" name=\\\"brandId\\\">\\n                    <input type=\\\"text\\\" placeholder=\\\"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\\\" name=\\\"email-phone\\\" class=\\\"subscribe-phone\\\">\\n                    <button type=\\\"submit\\\" class=\\\"book-notice-btn book-sub\\\">\\u5F00\\u552E\\u63D0\\u793A</button>\\n                </div>\\n            </form>\\n        </div>\");\n      i++;\n    }\n\n    $(\".last-show\").html(html);\n\n    if (typeof callback === \"function\") {\n      callback();\n    }\n  } // banner图片数据请求函数\n\n\n  function getBannerData() {\n    $.ajax({\n      url: \"https://pcapi.vip.com/cmc/index.php\",\n      dataType: \"jsonp\",\n      data: {\n        type: \"ADSEC56K,ADSP1Q2W,ADSZBA78,ADSIR7IX,ADSX7W3G,ADSNNLS7,ADS7JI3F,ADS2B669,ADSITG64,ADS45AV4,ADSHS93V,ADS44T33,ADS14OC5,ADSU3XLQ,ADSY2DWE,ADS3NGX5\",\n        warehouse: \"VIP_SH\",\n        areaid: 103104,\n        preview: 0,\n        date_from: \"\",\n        time_from: \"\",\n        user_class: \"\",\n        channelId: 0\n      },\n      success: function success(data) {\n        var res = null;\n\n        for (var attr in data) {\n          if (data[attr].items.length === 0) {\n            continue;\n          }\n\n          if (/ [\\u4e00-\\u9fa5]/.test(data[attr].items[0].name)) {\n            res = data[attr];\n          }\n        } // 渲染数据\n\n\n        if (res === null) {\n          return false;\n        }\n\n        var html = \"\";\n\n        for (var i = 0; i < res.items.length; i++) {\n          html += \"<div class=\\\"swiper-slide\\\"><a href=\\\"#\\\"><img\\n                    src=\\\"\".concat(res.items[i].img, \"\\\" alt=\\\"\\\"></a></div><style>\\n                    .swiper-pagination span:nth-of-type(\").concat(i + 1, \")::after{\\n                        content:\\\"\").concat(res.items[i].name, \"\\\";\\n                    }\\n                    </style>\");\n        }\n\n        $(\".swiper-wrapper\").html(html); // 轮播图的函数\n\n        swiperOpr();\n      },\n      jsonCallback: \"shopAds\"\n    });\n  } // 梯子对象\n\n\n  function Stairs(options) {\n    this.options = options;\n    this.init();\n  }\n\n  Stairs.prototype = {\n    constructor: Stairs,\n    init: function init() {\n      // 计算每一个内容元素的高度的数组\n      this.content_ele_offset_top_list = []; // 获取元素的偏移量\n\n      $(this.options.content_selector).offset(function (index, cords) {\n        // 将每一个元素的高度值放入发哦度列表之中\n        this.content_ele_offset_top_list.push(cords.top);\n        return cords;\n      }.bind(this)); // 计算最小高和最大高\n\n      var _length = this.content_ele_offset_top_list.length;\n      this.min_top = this.content_ele_offset_top_list[0];\n      this.max_top = this.content_ele_offset_top_list[_length - 1] + $(this.options.content_selector).last().height(); // 同样我们吧这个最高的值放入数组中之后的计算需要使用\n\n      this.content_ele_offset_top_list.push(this.max_top);\n      this.bindEvent();\n    },\n    bindEvent: function bindEvent() {\n      var $body_html = $(\"body,html\");\n      var instance = this; // 滚动事件监听\n      // 函数节流的变量\n\n      var t = null;\n      $(document).scroll(function () {\n        var _this = this;\n\n        if (typeof t === \"number\") {\n          return false;\n        }\n\n        t = setTimeout(function () {\n          t = null; // 获得数据\n\n          var scrollTop = $body_html.scrollTop(); // 计算下标\n\n          _this.calcStairsIndex(scrollTop);\n        }, 200);\n      }.bind(this)); // 点击右侧楼梯的我们需要滚动至对应的位置 绑定事件\n\n      $(this.options.stairs_selector).click(function () {\n        // 先得到点击事件元素在数组中的下标 通过这个下标找到对应的板块\n        var index = $(this).index(instance.options.stairs_selector);\n        instance.changeStairsIndex(index);\n      });\n    },\n    calcStairsIndex: function calcStairsIndex(st) {\n      // 我们需要判断数据是在哪一个楼梯的访问\n      if (st < this.min_top || st > this.max_top) {\n        this.index = -1;\n        this.changeStairsBtn();\n        return false;\n      }\n\n      var _list = this.content_ele_offset_top_list; // 数据一直在这个范围之内我们就不在重复计算了\n\n      if (st >= _list[this.index] && st < _list[this.index + 1]) {\n        return false;\n      } // 遍历记录滚入的楼梯的下标\n\n\n      for (var i = 0; i < _list.length; i++) {\n        if (st >= _list[i] && st < _list[i + 1]) {\n          this.index = i;\n          break;\n        }\n      }\n\n      this.changeStairsBtn();\n    },\n    changeStairsBtn: function changeStairsBtn() {\n      if (this.index === -1) {\n        $(this.options.stairs_selector).removeClass(\"cur\");\n        return false;\n      } // 如果不熟index===-1 说明要选中对应下标的楼梯\n\n\n      $(this.options.stairs_selector).eq(this.index).addClass(\"cur\").siblings().removeClass(\"cur\");\n    },\n    changeStairsIndex: function changeStairsIndex(index) {\n      // 通过这个index我们去scroll对应的板块\n      $(\"body,html\").scrollTop(this.content_ele_offset_top_list[index]);\n      $(document).trigger(\"scroll\");\n    }\n  };\n})();"]}